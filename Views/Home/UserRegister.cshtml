@page
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

<div class="d-flex justify-content-center align-items-center vh-100 bg-gradient">
    <div class="responsive-container bg-white shadow-lg rounded-4 p-5 animate__animated animate__fadeIn" style="max-width: 500px;">
        <div class="text-center mb-4">
            <i class="fa-solid fa-id-card fa-3x text-success mb-2"></i>
            <h2 class="fw-bold mb-1">Create Your Account</h2>
            @* <p class="text-muted">Join us and start your journey!</p> *@
        </div>
        
        <div class="mb-4">
            <label for="UFname" class="form-label fw-semibold">First Name</label>
            <div class="input-group">
                <span class="input-group-text bg-light"><i class="fa-regular fa-user"></i></span>
                <input type="text" class="form-control" id="UFname" name="Uname" placeholder="Enter your first name" 
                    onkeydown="if(event.key==='Tab'){validateInput(this, 'h1');}">
            </div>
            <small id="h1" class="text-danger d-none">Please enter your first name</small>
        </div>
        
        <div class="mb-4">
            <label for="ULname" class="form-label fw-semibold">Last Name</label>
            <div class="input-group">
                <span class="input-group-text bg-light"><i class="fa-regular fa-user"></i></span>
                <input type="text" class="form-control" id="ULname" name="Uname" placeholder="Enter your last name" 
                    onkeydown="if(event.key==='Tab'){validateInput(this, 'h2');}">
            </div>
            <small id="h2" class="text-danger d-none">Please enter your last name</small>
        </div>
        
        <div class="mb-4">
            <label for="State" class="form-label fw-semibold">Select State</label>
            <div class="dropdown w-100">
                <button type="button" id="State" class="btn btn-outline-primary dropdown-toggle w-100" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="fa-solid fa-location-dot me-2"></i>Select State
                </button>
                <label style="display:none" name="StateId"></label>
                <ul class="dropdown-menu w-100">
                    @foreach (var i in ViewBag.States)
                    {
                        <li value="@i.StateId">
                            <a class="dropdown-item" onclick="setStateName(this.parentElement.getAttribute('value'), this.innerText)">
                                @i.StateName
                            </a>
                        </li>
                    }
                </ul>
            </div>
        </div>
        
        <div class="mb-4">
            <label for="District" class="form-label fw-semibold">Select District</label>
            <div class="dropdown w-100">
                <button type="button" id="District" class="btn btn-outline-primary dropdown-toggle w-100" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="fa-solid fa-map me-2"></i>Select District
                </button>
                <ul class="dropdown-menu w-100" id="dist"></ul>
            </div>
        </div>

        <div class="mb-4">
            <label for="ZipCode" class="form-label fw-semibold">Select ZipCode Code</label>
            <div class="dropdown w-100">
                <button type="button" id="District" class="btn btn-outline-primary dropdown-toggle w-100" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="fa-solid fa-map me-2"></i>Select District
                </button>
                <ul class="dropdown-menu w-100" id="dist"></ul>
            </div>
        </div>


        <div class="d-grid mt-4">
            <button class="btn btn-primary btn-lg rounded-pill shadow-sm" type="submit">
                <i class="fa-solid fa-user-check me-2"></i>Register
            </button>
        </div>
    </div>
</div>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
<style>
    body, html {
        height: 100%;
        margin: 0;
        padding: 0;
        overflow: hidden;
    }
    .bg-gradient {
        background: linear-gradient(135deg, #74ebd5 0%, #ACB6E5 100%);
    }
    .responsive-container {
        background: #fff;
        border-radius: 1.5rem;
        box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
        transition: box-shadow 0.3s;
        margin-bottom: 50px;
    }
    .responsive-container:hover {
        box-shadow: 0 16px 48px 0 rgba(31, 38, 135, 0.25);
    }
    .dropdown-menu a:hover {
        background-color: #e9ecef;
        color: #0d6efd;
    }
    .input-group-text {
        border-right: 0;
    }
    .form-control {
        border-left: 0;
    }
    @@media (max-width: 768px) {
        .responsive-container {
            width: 98%;
            padding: 1.5rem;
        }
    }
</style>

<script>
    function validateInput(input, errorLabelId) {
        if (input.value.trim().length === 0) {
            event.preventDefault();
            document.getElementById(errorLabelId).classList.remove('d-none');
        } else {
            document.getElementById(errorLabelId).classList.add('d-none');
        }
    }

    function setStateName(stateId, stateName) {
        $("#State").html('<i class="fa-solid fa-location-dot me-2"></i>' + stateName);
        
        $.ajax({
            type: "GET",
            url: "/Home/GetDist",
            data: { StateId: stateId },
            success: function (response) {
                $("#dist").empty();
                $("#dist").append('<li value="0"><a class="dropdown-item" onclick="setDistName(this.parentElement.getAttribute(\'value\'), this.innerText)"><i class="fa-solid fa-map me-2"></i>Select District</a></li>');
                response.forEach(function (item) {
                    $("#dist").append('<li value="' + item.distId + '"><a class="dropdown-item" onclick="setDistName(this.parentElement.getAttribute(\'value\'), this.innerText)"><i class="fa-solid fa-map me-2"></i>' + item.distName + '</a></li>');
                });
            },
            error: function (xhr, status, error) {
                console.error("Error:", error);
            }
        });
    }

    function setDistName(distId, distName) {
        $("#District").html('<i class="fa-solid fa-map me-2"></i>' + distName);
    }
</script>
